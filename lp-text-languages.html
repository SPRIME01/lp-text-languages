<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/lp-ugettext/lp-ugettext.html">

<!--

`lp-text-languages` provides a declarative way with HTML attributes to show texts
translated.

##### Example

      <lp-text-languages
        pt-br="Um texto escrito no seu idioma preferido!" >
        A default text wrote in your preference language!
      </lp-text-languages>

@element lp-text-languages
@status beta
@homepage http://github.com/horacioibrahim/lp-text-languages
-->
<polymer-element name="lp-text-languages">
  <template>
    <lp-ugettext id="ugettext"></lp-ugettext>

    <!-- workaround to show content -->
    <span id="original" style="display: {{displayOriginal}};"><content></content></span>
    <span id="translated" style="display: {{displayTranslated}};">{{textTranslated}}</span>

  </template>
  <script>
    (function () {
      Polymer({
        /**
        * `Nome`
        *
        */
        // define element prototype here
        displayOriginal: 'inline',
        displayTranslated: 'none',
        publish: {
          textTranslated: '',
          hide: 'none',
          show: 'inline',
          default: 'en-US', // put in DECLARATIVE in HTML
        },
        ready: function() {
          this.setLanguage();
        },
        fetchAttributes: function() {
            return this.attributes;
        },
        getCurrentLanguage: function() {
          var ugettext = this.$.ugettext;
          return ugettext.language;
        },
        setLanguage: function() {
            var attrs = this.fetchAttributes();
            var currentLanguage = this.getCurrentLanguage();
            if (currentLanguage in attrs) {
              this.textTranslated = attrs[currentLanguage].value;
              this.changeSpanVisible();
            }
        },
        changeSpanVisible: function() {
          this.displayOriginal = this.hide;
          this.displayTranslated = this.show;
        }
      });
    })();
  </script>
</polymer-element>
